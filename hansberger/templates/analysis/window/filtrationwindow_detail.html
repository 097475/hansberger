{% extends "base.html" %}
{% load static %}

{% block title %} {{ window.analysis.name }} | {{ window.analysis.research.name }}{% endblock %}
{% block topbar %}
<div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="nav navbar-nav ml-auto">
      <li class="nav-item active">
          <a class="nav-link" href="ripser_download/">Download result</a>
        </li>
      <li class="nav-item active">
            <a class="nav-link" href="bottleneck/">Calculate Bottleneck Distance</a>
        </li>
      <li class="nav-item active">
            <a class="nav-link" href="../">Back</a>
        </li>
    </ul>
  </div>
{% endblock topbar %}
{% block content %}
<div class="container">


  <div class="row">
    <div class="col-sm-12">
      <h2>{{ window.analysis.name }} : {{ window.analysis.research.name }}</h2>
      {% if window.analysis.description %}
        <p>{{ window.analysis.description }}</p>
      {% endif %}
      <div id="fig_container">
        {{ window.plot | safe }}
      </div>
      <p id="entropy"></p>
      Window starts at position (inclusive): {{window.start}}</br>
      Window ends at position (non-inclusive): {{window.end}}</br>
    </div>
  </div>
</div>
{% endblock content %}
{% block javascript %}
{{ block.super }}
<script>
  var entropy = JSON.parse('{{ window.result_entropy|safe }}');
  for (var key in entropy) {
    if (entropy.hasOwnProperty(key)) {
          console.log(key + " -> " + entropy[key]);
          document.getElementById("entropy").innerHTML += key + " -> " + entropy[key] + "<br>";
        }
  }
</script>
{% endblock javascript %}
